---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import PostLayout from "../../layouts/PostLayout.astro";

export async function  getStaticPaths (){
    const posts = (await getCollection('blog'))
        .filter(post => !post.data.draft)
        .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

    return posts.map((post) => ({
        params: {slug: post.slug},
        props: post
    }));
};
type Props = CollectionEntry<'blog'>;

const post = Astro.props;
---

<PostLayout postData = { post } />